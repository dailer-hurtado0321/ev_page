(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,a){},33:function(e,t,a){t.CONFIG={VERSION:"0.1.0",HOST:"127.0.0.1",REDIRECT_URI:"https://server.certalink.com/user-panel"}},35:function(e,t,a){e.exports=a.p+"static/media/check.8a113877.svg"},37:function(e,t,a){e.exports=a(71)},42:function(e,t,a){},48:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(18),l=a.n(s),o=a(14),r=a(13),i=a(24),m=a(23),u=(a(42),a(12)),d=a.n(u),E=a(15),g=a(2),p=a(1),b=function(){function e(){Object(o.a)(this,e),this.isConnected=!1,this.serverPath="",this.keepConnection=!0,this.callbacks=[],this.dispatch=null,console.log("Socket client is created.")}return Object(r.a)(e,null,[{key:"getInstance",value:function(){return e._inst||(e._inst=new e),e._inst}}]),Object(r.a)(e,[{key:"initWithDispatch",value:function(e){this.dispatch=e}},{key:"connect",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.serverPath=e,this.keepConnection=t,this.socket&&this.socket.readyState!==WebSocket.CLOSED)console.log("Bad call to connect while client socket is running.");else try{this.socket=new WebSocket(e),this.socket.onopen=this.onOpen,this.socket.onerror=this.onError,this.socket.onclose=this.onClose,this.socket.onmessage=this.onMessage}catch(a){console.error("Error in connecting server.",a)}}},{key:"send",value:function(e,t){try{this.socket.send(JSON.stringify({type:e,data:t}))}catch(a){console.error("Error in sending data to server.",a)}}},{key:"numberWithCommas",value:function(e){return e>999?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e}},{key:"addEventListener",value:function(e,t){this.callbacks.push({eventType:e,callback:t})}},{key:"removeEventListener",value:function(e,t){this.callbacks=this.callbacks.filter((function(a){return a.eventType!==e||a.callback!==t}))}},{key:"callProperCallback",value:function(e,t){this.callbacks.forEach((function(a){a.eventType===e&&a.callback(t)}))}},{key:"onOpen",value:function(t){console.log("Socket is opend.",(new Date).toLocaleTimeString()),e.getInstance().isConnected=!0,e.getInstance().callProperCallback(e.EVENT.OPEN,t),e.getInstance().dispatch({type:"SOCKET_CONNECTION",response:e.getInstance().isConnected})}},{key:"onError",value:function(t){console.log("Socket error."),e.getInstance().isConnected=!1,e.getInstance().callProperCallback(e.EVENT.ERROR,t),e.getInstance().dispatch({type:"SOCKET_CONNECTION",response:e.getInstance().isConnected})}},{key:"onClose",value:function(t){console.log("Socket is closed."),e.getInstance().isConnected=!1,e.getInstance().dispatch({type:"SOCKET_CONNECTION",response:e.getInstance().isConnected}),e.getInstance().callProperCallback(e.EVENT.CLOSE,t),e.getInstance().keepConnection&&setTimeout((function(){return e.getInstance().connect(e.getInstance().serverPath,!0)}),5e3)}},{key:"onMessage",value:function(t){console.log("Socket message.",e.EVENT.MESSAGE),e.getInstance().callProperCallback(e.EVENT.MESSAGE,t)}}]),e}();b._inst=null,b.EVENT={OPEN:"SOCKET_OPEN",CLOSE:"SOCKET_CLOSED",ERROR:"SOCKET_ERROR",MESSAGE:"SOCKET_MESSAGE",LOGOUT:"LOG_OUT",LOGIN:"LOG_IN"};var f=a(8),v=a(21),h=a(3),O=(Object(v.a)("pk_test_51GsJaTENKR3DelSmluW4kP0QbP1fldW9sVMuegxwyMbmBt7yduvqb3Y0uvvNyZv9Da3gLS5o8iv25LSGvGOWYxDk009lbSNn9f"),{iconStyle:"solid",style:{base:{iconColor:"#c4f0ff",color:"black",fontWeight:500,fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"16px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"#87bbfd"}},invalid:{iconColor:"#ffc7ee",color:"#ffc7ee"}}}),S=function(e){var t=e.onChange;return c.a.createElement("div",{className:"FormRow"},c.a.createElement(f.CardElement,{options:O,onChange:t}))},C=function(e){e.label;var t=e.id,a=e.type,n=e.placeholder,s=e.required,l=e.autoComplete,o=e.value,r=e.onChange;return c.a.createElement("div",{className:"FormRow"},c.a.createElement("input",{className:"FormRowInput",id:t,type:a,placeholder:n,required:s,autoComplete:l,value:o,onChange:r}))},N=function(e){var t=e.processing,a=e.error,n=e.children,s=e.disabled;return c.a.createElement("button",{className:"SubmitButton ".concat(a?"SubmitButton--error":""),type:"submit",disabled:t||s},t?"Processing...":n)},k=function(e){var t=e.children;return c.a.createElement("div",{className:"ErrorMessage",role:"alert"},c.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 17 17"},c.a.createElement("path",{fill:"#FFF",d:"M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z"}),c.a.createElement("path",{fill:"#6772e5",d:"M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z"})),t)},j=function(e){var t=e.onClick;return c.a.createElement("button",{type:"button",className:"ResetButton",onClick:t},c.a.createElement("svg",{width:"32px",height:"32px",viewBox:"0 0 32 32"},c.a.createElement("path",{fill:"#FFF",d:"M15,7.05492878 C10.5000495,7.55237307 7,11.3674463 7,16 C7,20.9705627 11.0294373,25 16,25 C20.9705627,25 25,20.9705627 25,16 C25,15.3627484 24.4834055,14.8461538 23.8461538,14.8461538 C23.2089022,14.8461538 22.6923077,15.3627484 22.6923077,16 C22.6923077,19.6960595 19.6960595,22.6923077 16,22.6923077 C12.3039405,22.6923077 9.30769231,19.6960595 9.30769231,16 C9.30769231,12.3039405 12.3039405,9.30769231 16,9.30769231 L16,12.0841673 C16,12.1800431 16.0275652,12.2738974 16.0794108,12.354546 C16.2287368,12.5868311 16.5380938,12.6540826 16.7703788,12.5047565 L22.3457501,8.92058924 L22.3457501,8.92058924 C22.4060014,8.88185624 22.4572275,8.83063012 22.4959605,8.7703788 C22.6452866,8.53809377 22.5780351,8.22873685 22.3457501,8.07941076 L22.3457501,8.07941076 L16.7703788,4.49524351 C16.6897301,4.44339794 16.5958758,4.41583275 16.5,4.41583275 C16.2238576,4.41583275 16,4.63969037 16,4.91583275 L16,7 L15,7 L15,7.05492878 Z M16,32 C7.163444,32 0,24.836556 0,16 C0,7.163444 7.163444,0 16,0 C24.836556,0 32,7.163444 32,16 C32,24.836556 24.836556,32 16,32 Z"})))},I=function(e){var t=e.amount,a=e.price,s=e.tax,l=Object(p.c)((function(e){return e.socket})),o=Object(p.b)(),r=Object(f.useStripe)(),i=Object(f.useElements)(),m=Object(n.useState)(null),u=Object(g.a)(m,2),v=u[0],O=u[1],I=Object(n.useState)({}),y=Object(g.a)(I,2),_=(y[0],y[1]),T=Object(n.useState)(!1),w=Object(g.a)(T,2),x=w[0],P=w[1],R=Object(n.useState)(null),L=Object(g.a)(R,2),A=L[0],D=L[1],F=Object(n.useState)({email:"",name:""}),G=Object(g.a)(F,2),M=G[0],U=G[1];Object(n.useEffect)((function(){l.payment_secret&&B(l.payment_secret)}));var B=function(){var e=Object(E.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("before paymentSuccess",t,M.name,i.getElement(f.CardElement)),e.next=3,r.confirmCardPayment(t,{payment_method:{card:i.getElement(f.CardElement),billing_details:{name:M.name}},receipt_email:M.email});case 3:a=e.sent,o({type:"PAYMENT",response:null}),a.error?(console.log("result-error",a.error),O(a.error)):"succeeded"===a.paymentIntent.status&&(console.log("result-paymentSuccess",a.paymentIntent),console.log("email to send payment",l.status.email),b.getInstance().send("paymentSuccess",{paymentIntent:a.paymentIntent,email:l.status.email,tabId:1}),D(a.paymentIntent));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(E.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),r&&i){e.next=3;break}return e.abrupt("return");case 3:if(!v){e.next=6;break}return i.getElement("card").focus(),e.abrupt("return");case 6:b.getInstance().send("payment",{amount:t,tax:s,tabId:1}),_(i.getElement(f.CardElement)),console.log("elements.getElement(CardElement)",i.getElement(f.CardElement));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return A?c.a.createElement("div",{className:"Result"},c.a.createElement("div",{className:"ResultTitle",role:"alert"},"Payment successful"),c.a.createElement("div",{className:"ResultMessage"}),c.a.createElement(j,{onClick:function(){O(null),P(!1),D(null),U({email:"",name:""})}})):c.a.createElement("form",{className:"Form",onSubmit:W},c.a.createElement(C,{label:"Name",id:"name",type:"text",placeholder:"Name",required:!0,autoComplete:"name",value:M.name,onChange:function(e){U(Object(h.a)(Object(h.a)({},M),{},{name:e.target.value}))}}),c.a.createElement(C,{label:"Email",id:"email",type:"email",placeholder:"Email",required:!0,autoComplete:"email",value:M.email,onChange:function(e){U(Object(h.a)(Object(h.a)({},M),{},{email:e.target.value}))}}),c.a.createElement("fieldset",{className:"FormGroup"},c.a.createElement(S,{onChange:function(e){O(e.error)}})),v&&c.a.createElement(k,null,v.message),s?c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-7"},"Purchage ",t,"credits:"),c.a.createElement("div",{className:"col-sm-3"},"$",parseFloat(a).toFixed(2))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-7"},"GST(10%):"),c.a.createElement("div",{className:"col-sm-3"},"$",(parseFloat(a)/10).toFixed(2))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-7"},"TOTAL:"),c.a.createElement("div",{className:"col-sm-3"},"$",(parseFloat(a)+parseFloat(a)/10).toFixed(2)))):"",c.a.createElement(N,{processing:x,error:v,disabled:!r},"Pay US$",(parseFloat(a)+parseFloat(a)/10).toFixed(2)))},y=(a(48),Object(v.a)("pk_test_51GsJaTENKR3DelSmluW4kP0QbP1fldW9sVMuegxwyMbmBt7yduvqb3Y0uvvNyZv9Da3gLS5o8iv25LSGvGOWYxDk009lbSNn9f")),_=function(e){e.props,Object(p.b)();var t=Object(p.c)((function(e){return e.socket})),a=Object(n.useState)(1e3),s=Object(g.a)(a,2),l=s[0],o=s[1],r=Object(n.useState)(8),i=Object(g.a)(r,2),m=i[0],u=i[1],d=Object(n.useState)(!1),E=Object(g.a)(d,2),b=E[0],v=E[1];Object(n.useEffect)((function(){console.log("socket.user",t.user),v("en_au"==t.user.locale.toLowerCase())}),[]);var h={1e3:{price:8,description:"5K to 10K",dueTo:"40 minutes"},5e3:{price:39,description:"10K to 100K",dueTo:"40 minutes"},25e3:{price:162.5,description:"100K to 250K",dueTo:"40 minutes"}};function O(e){for(var t in h)if(t==e)return h[t]}return c.a.createElement("div",null,c.a.createElement("div",null),c.a.createElement("div",{className:"box mt-4"},c.a.createElement("select",{value:l,onChange:function(e){console.log(e.target.value,O(e.target.value).price),o(e.target.value),u(O(e.target.value).price)},style:{width:"100%"}},c.a.createElement("option",{value:"1000"},"1,000 credits for US $8"),c.a.createElement("option",{value:"5000"},"5,000 credits for US $39"),c.a.createElement("option",{value:"25000"},"25,000 credits for US $162.50"))),c.a.createElement("div",null,c.a.createElement(f.Elements,{stripe:y,options:{fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Roboto"}]}},c.a.createElement(I,{amount:l,price:m,tax:b}))))},T=a(22),w=a.n(T),x=a(35),P=a.n(x),R=function(e){var t=e.done,a=e.status;Object(p.b)();Object(n.useEffect)((function(){}),[]);return c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-3 "},t?c.a.createElement("img",{src:P.a}):""),c.a.createElement("div",{className:"col-sm-9 "},c.a.createElement("p",null,a))))},L=function(){Object(p.b)();var e=Object(n.useState)(!1),t=Object(g.a)(e,2),a=t[0],s=t[1],l=Object(n.useState)(!1),o=Object(g.a)(l,2),r=o[0],i=o[1],m=Object(n.useState)(!1),u=Object(g.a)(m,2),d=u[0],E=u[1],b=Object(n.useState)(!1),f=Object(g.a)(b,2),v=f[0],h=f[1],O=Object(n.useState)(!1),S=Object(g.a)(O,2),C=S[0],N=S[1],k=Object(n.useState)(!1),j=Object(g.a)(k,2),I=j[0],y=j[1],_=Object(n.useState)(""),T=Object(g.a)(_,2),w=T[0],x=T[1];Object(n.useEffect)((function(){P()}),[]);var P=function(){var e,t,a,n,c;t=(a=(e=new Date).getHours())<=11?"AM":"PM",a>12&&(a-=12),0==a&&(a=12),(n=e.getMinutes())<10&&(n="0"+n.toString()),c=a.toString()+":"+n.toString()+":"+t.toString(),x(c)},L=Object(p.c)((function(e){return e.socket}));return console.log("socket finish catch",L),"Processing"!==L.validateProcessing.status||a?"update_pipedrive"===L.validateProcessing.status&&(a||s(!0),r||i(!0),v||h(!0),d||E(!0)):s(!0),console.log("socket.stage",L.stage),"finished"===L.stage&&(a||s(!0),r||i(!0),d||E(!0),v||h(!0),C||N(!0),I||y(!0)),c.a.createElement("div",null,c.a.createElement("div",{className:"mt-4 box"},c.a.createElement("b",null,"Validation started at ",w),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(R,{done:!0,status:"File Uploaded"}),c.a.createElement(R,{done:a,status:"Queued"}),"92%"==L.validateProcessing.percent?c.a.createElement(R,{done:r,status:r?"Processing":"Processing(".concat(L.validateProcessing.percent,")-Waiting for greylist checking(approx20 mins)")}):c.a.createElement(R,{done:r,status:r?"Processing":"Processing(".concat(L.validateProcessing.percent,")")}),r?c.a.createElement(R,{done:C,status:C?"Updating Pipedrive":"Updating Pipedrive(".concat(L.validateProcessing.percent," %)")}):c.a.createElement(R,{done:C,status:"Updating Pipedrive"}),c.a.createElement(R,{done:I,status:"Email validation complete"})))},A=function(){var e=Object(p.b)(),t=Object(n.useState)(!1),a=Object(g.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(!1),r=Object(g.a)(o,2),i=r[0],m=r[1],u=Object(n.useState)(!1),d=Object(g.a)(u,2),E=d[0],f=d[1];Object(n.useEffect)((function(){0==v.scanned_emails&&e({type:"SET_STAGE",response:"email_not_found"})}),[]);var v=Object(p.c)((function(e){return e.socket}));return c.a.createElement("div",null,c.a.createElement("div",{className:"mt-4 box"},c.a.createElement("b",null,"Person scanned: "),b.getInstance().numberWithCommas(v.scanned_persons)),c.a.createElement("div",{className:"mt-4 box"},c.a.createElement("b",null,"Unique emails: "),b.getInstance().numberWithCommas(v.scanned_emails)),c.a.createElement("div",{className:"box mt-4 row"},c.a.createElement("div",{className:"col-sm-7"},c.a.createElement("p",{className:"label"},"Download ResultFile")),c.a.createElement("div",{className:"col-sm-5"},c.a.createElement("label",{className:"switch"},c.a.createElement("input",{className:"switch-input",type:"checkbox",onClick:function(){return l(!s)}}),c.a.createElement("span",{className:"switch-label","data-on":"On","data-off":"Off"}),c.a.createElement("span",{className:"switch-handle"})))),c.a.createElement("div",{className:"box mt-4 row"},c.a.createElement("div",{className:"col-sm-7"},c.a.createElement("p",{className:"label"},"Update Pipedrive")),c.a.createElement("div",{className:"col-sm-5"},c.a.createElement("label",{className:"switch"},c.a.createElement("input",{className:"switch-input",type:"checkbox",onClick:function(){return m(!i)}}),c.a.createElement("span",{className:"switch-label","data-on":"On","data-off":"Off"}),c.a.createElement("span",{className:"switch-handle"})))),c.a.createElement("div",{className:"box mt-4 row"},c.a.createElement("div",{className:"offset-sm-1 col-sm-6"},c.a.createElement("p",{className:"label"},"Delete invalid addresses")),c.a.createElement("div",{className:"col-sm-5"},c.a.createElement("input",{type:"radio",name:"pipRadio",onClick:function(){return f(!0)},disabled:!i}))),c.a.createElement("div",{className:"box mt-4 row"},c.a.createElement("div",{className:"offset-sm-1 col-sm-6"},c.a.createElement("p",{className:"label"},"Append invalid addresses")),c.a.createElement("div",{className:"col-sm-5"},c.a.createElement("input",{type:"radio",name:"pipRadio",onClick:function(){return f(!1)},disabled:!i}))),c.a.createElement("div",{className:"box mt-4"}),c.a.createElement("div",{className:"box mt-4"},c.a.createElement("button",{className:"button",onClick:function(){i?b.getInstance().send("validate",{csv:v.csv,email:v.email,idToEmail:v.idToEmail,scanned_persons:v.scanned_persons,isDownload:s,isUpdate:i,isDelete:E}):b.getInstance().send("validate",{csv:v.csv,email:v.email,idToEmail:v.idToEmail,scanned_persons:v.scanned_persons,isDownload:s,isUpdate:!1,isDelete:!1})}},"Validate Emails")))},D=function(e){var t=e.idOfFilter,a=Object(p.b)(),s=Object(n.useState)(0),l=Object(g.a)(s,2),o=l[0],r=l[1],i=Object(n.useState)(0),m=Object(g.a)(i,2),u=m[0],d=m[1];Object(n.useEffect)((function(){"scanning"===E.stage&&N(0,t)}),[]);var E=Object(p.c)((function(e){return e.socket})),f={message:"starting scaning",scanned:0,emails:0,invalid_emails:0},v={},h={},O="",S={},C={};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;console.log("allPesonsEmails",{page:e,filter:t}),fetch("https://api.pipedrive.com/v1/persons?filter_id=".concat(t,"&start=").concat(e,"&limit=100"),{method:"GET",mode:"cors",headers:{Authorization:"Bearer "+localStorage.getItem("access_token").toString().replace(/"/g,"")}}).then((function(e){return e.json()})).then((function(a){k(a.data),a.additional_data.pagination.more_items_in_collection?N(e+100,t):j()})).catch((function(e){console.error("Error:",e),console.log("noEmailFound")}))}function k(e){null!=e&&e[0]&&(console.log("collectEmails",e),e.forEach((function(e){v[e.id]||(f.scanned++,d(f.scanned),e.email[0]&&e.email[0].value&&(S[e.id]=[],e.email.forEach((function(t){-1==t.value.indexOf(",")?(S[e.id].push(t.value),h[t.value]?h[t.value]++:(f.emails++,r(f.emails),h[t.value]=1,t.value.indexOf("(")>0?O+="\n".concat(t.value.substr(0,t.value.indexOf("(")),",").concat(e.first_name,",").concat(e.last_name):O+="\n".concat(t.value,",").concat(e.first_name,",").concat(e.last_name))):C[t.value]?C[t.value]++:(f.invalid_emails++,C[t.value]=1)}))))})),console.log("emails",h),console.log("idToEmail",S))}var j=function(){d(f.scanned),r(f.emails),console.log("scan finished",f.emails,f.scanned),console.log("scan scanedMail",o),a({type:"SET_VALIDATE",response:{scanned_persons:f.scanned,scanned_emails:f.emails,csv:O,idToEmail:S,email:E.user.email}}),a({type:"SET_STAGE",response:"scan_finished"})};return c.a.createElement("div",null,"scan_finished"===E.stage?c.a.createElement(A,null):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{display:"flex  "}},c.a.createElement(w.a,{type:"ThreeDots",color:"#e07b12",height:"80",width:"80"})),c.a.createElement("div",{className:"mt-4 box"},c.a.createElement("b",null,"Person scanned: "),b.getInstance().numberWithCommas(u)),c.a.createElement("div",{className:"mt-4 box"},c.a.createElement("b",null,"Unique emails: "),b.getInstance().numberWithCommas(o))))},F=a(36),G=function(e){e.props;var t=Object(p.b)(),a=Object(n.useState)([]),s=Object(g.a)(a,2),l=s[0],o=s[1],r=Object(n.useState)(0),i=Object(g.a)(r,2),m=i[0],u=i[1];Object(n.useEffect)((function(){d.loggedIn&&(fetch("https://api.pipedrive.com/v1/filters?type=people",{method:"GET",mode:"cors",headers:{Authorization:"Bearer "+localStorage.getItem("access_token").toString().replace(/"/g,"")}}).then((function(e){return e.json()})).then((function(e){console.log("get filters with access_token",e.data),o(e.data),o((function(e){return[{id:0,name:"All Contacts"}].concat(Object(F.a)(e))}))})),b.getInstance().send("status",{token:"cc638af3ea2783059aae7e32b5b80e34c1f0d1f4",id:d.user.id,socket_id:localStorage.getItem("socket_id"),refresh_token:localStorage.getItem("refresh_token")}))}),[]);var d=Object(p.c)((function(e){return e.socket}));function E(e){u(e.target.value)}var f=function(){t({type:"SET_STAGE",response:"scanning"})},v=l.length>0&&l.map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.name)}),void 0);return c.a.createElement("div",{className:"mt-4"},c.a.createElement("h3",null,"Validate Emails"),"scanning"===d.stage&&c.a.createElement(D,{idOfFilter:m}),"validating"===d.stage&&c.a.createElement(L,null),"finished"===d.stage&&c.a.createElement(L,null),"scan_finished"===d.stage&&c.a.createElement(D,null),"selected"===d.stage&&c.a.createElement("div",null,c.a.createElement("div",null,'Choose "All Contacts" or select a filter to check'),c.a.createElement("div",{className:"box"},c.a.createElement("select",{className:"mt-2",value:m,onChange:E},v)),c.a.createElement("div",{className:"mt-4"},"Contacts might have than one email or duplicates. Before we can continue we need to find all of them. This usually takes less than a minute."),c.a.createElement("div",{className:"box"},c.a.createElement("button",{className:"button",onClick:f},c.a.createElement("i",{className:"fa fa-search mr-3"}),"Scan Selected"))),"email_not_found"===d.stage&&c.a.createElement("div",null,c.a.createElement("div",{className:"mt-4",style:{color:"red"}},"Emails Not Founded with Seleted Filter. Try again."),c.a.createElement("div",null,'Choose "All Contacts" or select a filter to check'),c.a.createElement("div",{className:"box"},c.a.createElement("select",{className:"mt-2",value:m,onChange:E},v)),c.a.createElement("div",{className:"mt-4"},"Contacts might have than one email or duplicates. Before we can continue we need to find all of them. This usually takes less than a minute."),c.a.createElement("div",{className:"box"},c.a.createElement("button",{className:"button",onClick:f},c.a.createElement("i",{className:"fa fa-search mr-3"}),"Scan Selected"))))},M=function(e){e.props;Object(n.useEffect)((function(){}),[]);Object(p.c)((function(e){return e.socket}));return c.a.createElement("div",null,c.a.createElement(G,null))},U=(a(32),function(e){var t=e.handleScan,a=e.handleCredit,s=(Object(p.b)(),Object(n.useState)(1e3)),l=Object(g.a)(s,2);l[0],l[1];Object(n.useEffect)((function(){}),[]);var o=Object(p.c)((function(e){return e.socket}));return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("div",{className:"mt-4 box"},c.a.createElement("b",null,"Pipedrive User: "),c.a.createElement("p",null,o.user.name),c.a.createElement("p",null,o.user.email),c.a.createElement("p",null,o.user.company_name),c.a.createElement("p",null,"Credits:"," ",b.getInstance().numberWithCommas(o.credits)))),c.a.createElement("div",{className:"mt-4 box"},c.a.createElement("a",null,c.a.createElement("button",{className:"sectionButton"})),c.a.createElement("a",null,c.a.createElement("button",{className:"sectionButton",onClick:t},"Validate Emails")),c.a.createElement("a",null,c.a.createElement("button",{className:"sectionButton",onClick:a},"Purchase Credits")),c.a.createElement("a",{onClick:function(){localStorage.removeItem("loggedIn"),localStorage.removeItem("user"),localStorage.removeItem("access_token"),localStorage.removeItem("status"),window.location.reload()}},c.a.createElement("button",{className:"sectionButton",onClick:a},"Logout"))))}),B=a(33),W="cc638af3ea2783059aae7e32b5b80e34c1f0d1f4",K=function(e){var t=e.page,a=e.handleScan,s=e.handleCredit,l=Object(n.useState)(!1),o=Object(g.a)(l,2),r=o[0],i=o[1],m=Object(p.c)((function(e){return e.socket})),u=Object(p.b)(),f=document.location.href.indexOf("code=")>-1;Object(n.useEffect)((function(){if(!m.loggedIn&&f){if(document.location.href.includes("code=")){var e=document.location.href.split("code=")[1].split("#")[0];i(!0),u({type:"OAUTH_CODE",response:e}),Object(E.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getInstance().send("oauth",{params:e,tabId:""});case 2:return console.log("send status after oauth"),t.next=5,b.getInstance().send("status",{token:W,id:m.user.id});case 5:return console.log("status afcode",e),t.next=8,b.getInstance().send("status",{token:W,id:m.user.id});case 8:case"end":return t.stop()}}),t)})))()}}else m.loggedIn;m&&m.isLoggingIn&&(alert("loggedin"),b.getInstance().send("status",{token:W,id:m.user.id,socket_id:localStorage.get("socket_id")}),window.location=B.Config.REDIRECT_URI)}),[]);return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"agileits-top"},m.loggedIn?c.a.createElement("div",null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-5 "},c.a.createElement(U,{handleScan:a,handleCredit:s})),c.a.createElement("div",{className:"col-sm-1"}),c.a.createElement("div",{className:"col-sm-6 "},t?c.a.createElement(M,null):c.a.createElement(_,null)))):c.a.createElement("div",null,r?c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("h3",{style:{margin:"auto 20px "}}," Connecting Pipedrive"),c.a.createElement("span",null,c.a.createElement(w.a,{type:"ThreeDots",color:"#2BAD60",height:"80",width:"80"}))):c.a.createElement("div",{className:"box"},c.a.createElement("a",{target:"blank",href:"https://oauth.pipedrive.com/oauth/authorize?client_id=67c7097db1c334ad&redirect_uri=https://certalink.com/user-panel"},c.a.createElement("button",{className:"loginButton",onClick:function(){i(!0)}},"Connect to Pipedrive"))))))},V=a(33),J=function(e){e.props;var t=Object(p.b)(),a=Object(n.useState)(!0),s=Object(g.a)(a,2),l=s[0],o=s[1];Object(n.useEffect)((function(){console.log("refresh SOCKET MESSAGE"),b.getInstance().initWithDispatch(t),b.getInstance().addEventListener(b.EVENT.MESSAGE,(function(e){var a=JSON.parse(e.data);switch(console.log("SOCKET MESSAGE",a),a.type){case"error":t({type:"ERROR",response:a.data});break;case"payment":console.log("PAYMENT",a.data.secret),t({type:"PAYMENT",response:a.data.secret});break;case"loggedin":console.log("loggedin",a.data.auth),localStorage.setItem("user",JSON.stringify(a.data.auth)),localStorage.setItem("access_token",JSON.stringify(a.data.access_token)),localStorage.setItem("refresh_token",JSON.stringify(a.data.refresh_token)),localStorage.setItem("loggedIn",!0),t({type:"LOG_IN",response:a.data}),window.location=V.CONFIG.REDIRECT_URI;break;case"testing":console.log("testing",a.data);break;case"status":console.log("case status",a.data),localStorage.setItem("status",JSON.stringify(a.data)),a.data.access_token&&"undefined"!==a.data.access_token&&localStorage.setItem("access_token",JSON.stringify(a.data.access_token)),t({type:"STATUS",response:a.data});break;case"update":a.data.socket_id&&localStorage.setItem("socket_id",a.data.socket_id),console.log("update status",a.data),"payment"==a.data.state?b.getInstance().send("status",{token:"cc638af3ea2783059aae7e32b5b80e34c1f0d1f4",id:r.user.id}):a.data.validateProcessing?t({type:"VALIDATE_PROCESS",response:a.data}):t({type:"SET_STAGE",response:a.data.state});break;case"file":console.log(a.data);var n="data:text/csv;charset=utf-8,"+encodeURIComponent(a.data),c=document.createElement("a");c.href=n,c.download=r.user.company_name+".csv",document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c)}),0)}}))}),[]);var r=Object(p.c)((function(e){return e.socket}));return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"main-w3layouts wrapper"},r.connection?c.a.createElement(K,{page:l,handleScan:function(){o(!0)},handleCredit:function(){o(!1)}}):c.a.createElement("h1",null,"Connecting...")))},q=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,"profile page")}}]),a}(n.Component),Y=function(e){e.props;return c.a.createElement("p",null)},$=a(72),Z=function(){return c.a.createElement($.d,null,c.a.createElement($.b,{path:"/user-panel",exact:!0,component:J}),c.a.createElement($.b,{path:"/about",exact:!0,component:Y}),c.a.createElement($.b,{path:"/pages/profile/",exact:!0,component:q}),c.a.createElement($.a,{exact:!0,to:"/user-panel"}))},z=(a(69),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){b.getInstance().connect("wss://server.certalink.com/ev_server")},n.state={storage:0,web3:null,accounts:null,incidents:null,crowdsale:null,fund:null},n}return Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("main",null,c.a.createElement(Z,null)))}}]),a}(n.Component)),H=(a(70),a(11));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=a(6),X=localStorage.getItem("loggedIn"),ee=X?JSON.parse(localStorage.getItem("user")):{},te=X?JSON.parse(localStorage.getItem("status")):{},ae=X?JSON.parse(localStorage.getItem("access_token")):"",ne={connection:!1,code:"",credits:te?te.credits:0,loggedIn:X,user:ee,status:te,access_token:ae,stage:"selected",validateProcessing:{status:"Queued",percent:"0%"},error:""},ce=Object(Q.b)({socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.response;switch(a){case"SOCKET_CONNECTION":return console.log("socket connect res",n),Object(h.a)(Object(h.a)({},e),{},{connection:n});case"OAUTH_CODE":return Object(h.a)(Object(h.a)({},e),{},{code:n});case"SCANNING":return localStorage.setItem("stage","scanning"),Object(h.a)(Object(h.a)({},e),{},{stage:localStorage.getItem("stage","scanning")});case"PAYMENT":return Object(h.a)(Object(h.a)({},e),{},{payment_secret:n});case"SET_STAGE":return console.log("update",n),Object(h.a)(Object(h.a)({},e),{},{stage:n});case"VALIDATE_PROCESS":if(n.validateProcessing)return console.log("validateProcessing-----",n),localStorage.setItem("stage",n.state),Object(h.a)(Object(h.a)({},e),{},{stage:localStorage.getItem("stage"),validateProcessing:n.validateProcessing});case"SET_VALIDATE":return console.log("validate",n),Object(h.a)(Object(h.a)({},e),{},{scanned_persons:n.scanned_persons,scanned_emails:n.scanned_emails,csv:n.csv,idToEmail:n.idToEmail,email:n.email});case"LOG_IN":return X=localStorage.getItem("loggedIn"),ee=X?JSON.parse(localStorage.getItem("user")):{},ae=X?JSON.parse(localStorage.getItem("access_token")):"",Object(h.a)(Object(h.a)({},e),{},{loggedIn:X,user:ee,access_token:ae});case"STATUS":return te=X?JSON.parse(localStorage.getItem("status")):{},Object(h.a)(Object(h.a)({},e),{},{credits:te.credits});case"UPDATE_CREDIT":return Object(h.a)({},e);case"ERROR":return console.log("response ERROR",n.messages),Object(h.a)(Object(h.a)({},e),{},{error:n.messages});case"INITILIZE_WEB3":return Object(h.a)(Object(h.a)({},e),{},{web3:n});case"WEB3_GET_ACCOUNTS":return Object(h.a)(Object(h.a)({},e),{},{accounts:n});default:return e}}}),se=Object(Q.c)(ce),le=H.a();l.a.render(c.a.createElement(p.a,{store:se},c.a.createElement($.c,{history:le},c.a.createElement($.b,{component:z}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.605bc75e.chunk.js.map